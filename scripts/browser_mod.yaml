popup_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: House Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.den_blinds
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Den
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.kitchen_blinds
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Kitchen
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.office_blinds
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Office
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.master_blinds
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Master
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.guest_blind
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Guest
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.server_room_blind
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Server
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
            
            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  entity: cover.shack_blinds
                  color_type: icon
                  state:
                    - value: "open"
                      color: rgb(228, 94, 101)
                      icon: mdi:blinds-open
                    - value: "closed"
                      color: rgb(255, 255, 255)
                      icon: mdi:blinds
                    - value: "unavailable"
                      color: rgb(228, 94, 101)
                      icon: mdi:exclamation
                  name: Shack
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:gap-card"

                - type: "custom:button-card"
                  color_type: icon
                  icon: mdi:refresh
                  name: Calibrate
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: habc/all/command/set/calibrate

popup_roomba:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Roomba
        card:
          type: entities
          show_header_toggle: false
          entities:
              - entity: switch.roomba
              - entity: sensor.roomba_battery_level
              - entity: sensor.roomba_status
              - entity: input_boolean.roomba_auto
              - entity: counter.roomba_cycles
                name: Cycles Since Emptied
                icon: mdi:robot-vacuum
              - entity: script.reset_roomba_counter
                name: Reset Cycle Count
                icon: mdi:delete-empty

popup_washer:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Washer
        card:
          type: entities
          entities:
            - entity: sensor.washer_state
            - entity: sensor.washer_voltage
            - entity: sensor.washer_watts
            - entity: sensor.washer_amps
            - entity: sensor.washer_energy_today
              icon: 'mdi:gauge'
            - entity: sensor.washer_energy_yesterday
              icon: 'mdi:gauge'
            - entity: sensor.washer_signal
              icon: 'mdi:wifi'               

popup_dryer:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Dryer
        card:
          type: entities
          entities:
            - entity: sensor.dryer_state
            - entity: sensor.dryer_voltage
            - entity: sensor.dryer_watts
            - entity: sensor.dryer_amps
            - entity: sensor.dryer_energy_today
              icon: 'mdi:gauge'
            - entity: sensor.dryer_energy_yesterday
              icon: 'mdi:gauge'
            - entity: sensor.dryer_signal
              icon: 'mdi:wifi'            

popup_office_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Office Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.left_office_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Left
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.center_office_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Center
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.right_office_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Right
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

popup_automation_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                    
        title: Automation Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.automation_count
              name: Current Automations
            - input_number.automation_count_expected

popup_binary_sensor_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]       
        title: Binary Sensor Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.binary_sensor_count
              name: Current Binary Sensors
            - input_number.binary_sensor_count_expected

popup_switch_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]   
        title: Switch Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.switch_count
              name: Current Switches
            - input_number.switch_count_expected

popup_fan_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]   
        title: Fan Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.fan_count
              name: Current Fans
            - input_number.fan_count_expected

popup_lights_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]       
        title: Light Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.lights_count
              name: Current Lights
            - input_number.light_count_expected

popup_tracker_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                       
        title: Device Tracker Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.tracker_count
              name: Current Device Trackers
            - input_number.tracked_device_count_expected

popup_media_player_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]      
        title: Media Player Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.media_player_count
              name: Current Media Players
            - input_number.media_player_count_expected

popup_script_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                
        title: Script Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.script_count
              name: Current Scripts
            - input_number.script_count_expected

popup_sensor_count:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]             
        title: Sensor Count Settings
        card:
          type: entities
          entities:
            - entity: sensor.sensor_count
              name: Current Sensors
            - input_number.sensor_count_expected

popup_github:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                                    
        title: GitHub Updater
        card:
          type: vertical-stack
          cards:
            
            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  entity: binary_sensor.git_update_ready
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                    - value: 'off'
                      color: rgb(255, 255, 255)
                  icon: mdi:github-circle
                  name: Pull
                  tap_action: 
                    action: call-service
                    service: script.update_config
                
                - type: "custom:button-card"
                  entity: binary_sensor.git_update_ready
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                    - value: 'off'
                      color: rgb(255, 255, 255)
                  icon: mdi:github-circle
                  name: Restart
                  tap_action: 
                    action: call-service
                    service: script.update_config_restart

                - type: "custom:button-card"
                  entity: binary_sensor.git_update_ready
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                    - value: 'off'
                      color: rgb(255, 255, 255)
                  icon: mdi:equal
                  name: Clear
                  tap_action: 
                    action: call-service
                    service: script.clear_config_update_flag
                    
            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:robot
                  name: Automations
                  tap_action: 
                    action: call-service
                    service: automation.reload
                
                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:script-text
                  name: Scripts
                  tap_action: 
                    action: call-service
                    service: script.reload

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:tools
                  name: Helpers
                  tap_action: 
                    action: call-service
                    service: script.reload_all_helpers

popup_hacs:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]        
        title: HACS
        card:
          type: "custom:list-card"
          entity: sensor.hacs            
          feed_attribute: repositories
          columns:
            - {field: display_name, title: 'Name'}
            - {field: installed_version, title: 'Installed'}
            - {field: available_version, title: 'Latest'}   

popup_christmas_outdoor:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Outdoor Christmas
        card:
          type: entities
          entities:
            - entity: input_boolean.christmas_show
            - entity: sensor.fpp_master_playlist
              name: Playlist
            - entity: sensor.fpp_master_playlist_section
              name: Playlist Section
            - entity: sensor.fpp_master_sequence
              name: Sequence

popup_media_office:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Office NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 1
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 1

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 1

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_1_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 1,6                      

popup_media_guest_bed:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Guest Room NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 2
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 2

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 2

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_2_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 2,6   

popup_media_server:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Server Room NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 3
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 3

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 3

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_3_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 3,6   

popup_media_master_bed:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Master Bedroom NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 4
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 4

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 4

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_4_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 4,6   

popup_media_master_bath:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Master Bathroom NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 5
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 5

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 5

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_5_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 5,6           

popup_media_garage:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]   
        title: Garage NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 6
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 6

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 6

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_6_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 6,6     

popup_media_den:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                                                    
        title: Den NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 7
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 7

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 7

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_7_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 7,6     

popup_media_dining:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]     
        title: Ham Shack NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 9
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 9

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 9

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_9_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 9,6    

popup_media_kitchen:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"] 
        title: Kitchen NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 10
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 10

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 10

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_10_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 10,6                          

popup_media_porch:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                                                              
        title: Back Porch NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 11
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 11

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 11

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_11_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 11,6

popup_media_guest_bath:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]     
        title: Guest Bathroom NuVo
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-backward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/prev
                      payload: 12
                
                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:play-pause
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/play
                      payload: 12

                - type: "custom:button-card"                
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:skip-forward
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/next
                      payload: 12

                - type: "custom:gap-card"

            - type: horizontal-stack
              cards:
                #- type: "custom:gap-card"

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 1
                      color: rgb(228, 94, 101)
                    - value: 1
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:spotify
                  name: Spotify
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,1
                
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 2
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 2
                      color: rgb(228, 94, 101)
                    - value: 2
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:cast-audio
                  name: Cast
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,2

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 3
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 3
                      color: rgb(228, 94, 101)
                    - value: 3
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:amazon-alexa
                  name: Alexa
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,3
            - type: horizontal-stack
              cards:
                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 4
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 4
                      color: rgb(228, 94, 101)
                    - value: 4
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 1
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,4      

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 5
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 5
                      color: rgb(228, 94, 101)
                    - value: 5
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:server
                  name: Server 2
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,5

                - type: "custom:button-card"
                  entity: sensor.nuvo_zone_12_source
                  color_type: icon
                  state:
                    - value: 6
                      operator: <
                      color: rgb(255, 255, 255)
                    - value: 6
                      color: rgb(228, 94, 101)
                    - value: 6
                      operator: >
                      color: rgb(255, 255, 255)
                  icon: mdi:video-input-component
                  name: Aux
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: nuvo/command/set/zone/src
                      payload: 12,6                                        

popup_den_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Den Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.left_den_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Left
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.center_den_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Center
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.right_den_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Right
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info                      

popup_shack_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: HAM Shack Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.left_shack_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Left
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.center_shack_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Center
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.right_shack_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Right
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info                    

popup_kitchen_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Kitchen Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.left_kitchen_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Left
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.right_kitchen_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Right
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.east_kitchen_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: East
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info                    

popup_master_blinds:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Master Bedroom Blinds
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: cover.left_master_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Left
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: cover.center_master_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Center
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: cover.right_master_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: Right
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info                       
            - type: horizontal-stack
              cards:
                
                - type: "custom:gap-card"
                
                - type: "custom:button-card"
                  entity: cover.west_master_blind
                  color_type: icon
                  state:
                      - value: "open"
                        color: rgb(228, 94, 101)
                        icon: mdi:blinds-open
                      - value: "closed"
                        color: rgb(255, 255, 255)
                        icon: mdi:blinds
                      - value: "unavailable"
                        color: rgb(228, 94, 101)
                        icon: mdi:exclamation
                  name: West
                  tap_action:
                    action: toggle
                  hold_action: 
                    action: more-info

                - type: "custom:gap-card"

popup_media_wha:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Google Music
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - entity: input_select.gmusic_player_speakers
              - entity: input_select.gmusic_player_source
              - entity: input_select.gmusic_player_playlist
              - entity: input_select.gmusic_player_station
              - type: custom:mini-media-player
                entity: media_player.gmusic_player
                icon: mdi:google-play
                #group: true
                artwork: cover
                hide:
                  source: true

              - type: custom:mini-media-player
                entity: media_player.whole_house_audio
                icon: mdi:cast
                #group: true
                artwork: cover
                volume_stateless: true
                hide:
                  source: true
                  volume: true

popup_manual_alarm:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Manual Alarm Clock
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  entity: input_boolean.manual_alarm_enabled
                  color_type: icon
                  color: rgb(228, 94, 101)
                  state:
                    - value: "on"
                      icon: mdi:alarm-check
                    - value: "off"
                      icon: mdi:alarm-off
                  name: Enable
                  hold_action: 
                    action: more-info
                
                - type: "custom:button-card"
                  entity: input_boolean.manual_alarm_repeat
                  color_type: icon
                  color: rgb(228, 94, 101)
                  state:
                    - value: "on"
                      icon: mdi:repeat
                    - value: "off"
                      icon: mdi:repeat-off
                  name: Repeat
                  hold_action: 
                    action: more-info

                - type: "custom:button-card"
                  entity: input_boolean.manual_alarm_horn
                  color_type: icon
                  state:
                    - value: "on"
                      icon: mdi:alarm-bell
                      color: rgb(228, 94, 101)
                      name: Horn
                    - value: "off"
                      icon: mdi:music
                      color: rgb(228, 94, 101)
                      name: Music
                  hold_action: 
                    action: more-info  
            - type: horizontal-stack
              cards:
                - type: "custom:gap-card"
                
                - type: "custom:button-card"
                  entity: input_boolean.manual_alarm_hvac
                  color_type: icon
                  color: rgb(228, 94, 101)
                  icon: mdi:thermostat
                  name: Resume
                  hold_action: 
                    action: more-info      

                - type: "custom:gap-card"

            - type: 'custom:time-picker-card'
              entity: input_datetime.master_manual_alarm
              name: Wake Time
              hour_mode: 12
              layout:
                name: inside
                align_controls: right
                hour_mode: single

popup_filter:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: HVAC Filter
        card:
          type: vertical-stack
          cards:
            - type: "custom:hui-entities-card"
              entities:                 
              - entity: sensor.furnace_filter_last_replaced 
              - entity: sensor.furnace_filter_life
              - entity: sensor.average_total_runtime_week
              - entity: sensor.furnace_filter_days_remaining
              - entity: input_number.replacement_threshold   
              - type: "custom:restriction-card"
                row: true
                restrictions:
                  confirm: true
                  text: "Reset filter timer?"
                card:
                  entity: script.furnace_filter_date   
                  name: Reset Filter    

popup_blind_network:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Blind Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - device_tracker.den_c
              - device_tracker.den_l
              - device_tracker.den_r
              - device_tracker.guest
              - device_tracker.kitchen_e
              - device_tracker.kitchen_l
              - device_tracker.kitchen_r
              - device_tracker.master_c
              - device_tracker.master_l
              - device_tracker.master_r
              - device_tracker.master_w
              - device_tracker.office_c
              - device_tracker.office_l
              - device_tracker.office_r
              - device_tracker.shack_c
              - device_tracker.shack_l
              - device_tracker.shack_r
              - device_tracker.server                 

popup_led_network:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: LED Controller Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - device_tracker.den_1
              - device_tracker.gbath
              - device_tracker.kitchen_1
              - device_tracker.kitchen_2
              - device_tracker.kitchen_3
              - device_tracker.kitchen_4
              - device_tracker.kitchen_5
              - device_tracker.kitchen_6
              - device_tracker.kitchen_7
              - device_tracker.kitchen_8
              - device_tracker.mbath
              - device_tracker.mbed_1
              - device_tracker.mbed_2
              - device_tracker.shack               

popup_docker:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Docker Container Status
        card:
          type: vertical-stack
          cards:
            - type: "custom:hui-entities-card"
              entities:
              - type: "custom:restriction-card"
                row: true
                restrictions:
                  confirm: true
                  text: "Change container state?"
                card:
                  entity: switch.frigate
              - type: "custom:restriction-card"
                row: true
                restrictions:
                  confirm: true
                  text: "Change container state?"
                card:
                  entity: switch.mysql
              - type: "custom:restriction-card"
                row: true
                restrictions:
                  confirm: true
                  text: "Change container state?"
                card:
                  entity: switch.tv_headend
              - type: "custom:restriction-card"
                row: true
                restrictions:
                  confirm: true
                  text: "Change container state?"
                card:
                  entity: switch.eagle_mqtt               

popup_server_ups:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Server Room UPS Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - entity: sensor.server_ups_status
                name: Power Source
              - entity: sensor.server_ups_battery_health
                name: Battery Status
              - entity: sensor.server_ups_battery_capacity
                name: Charge Level
              - entity: sensor.server_ups_remaining_runtime
                name: Runtime
              - entity: sensor.server_ups_output_load
                name: Load
              - entity: sensor.server_ups_output_voltage
                name: Output Voltage
              - entity: sensor.server_ups_output_frequency
                name: Output Frequency
              - entity: sensor.server_ups_output_current
                name: Output Current
              - entity: sensor.server_ups_input_voltage
                name: Input Voltage
              - entity: sensor.server_ups_input_frequency
                name: Input Frequency
              - entity: sensor.server_ups_battery_temperature
                name: Battery Temperature

popup_shack_ups:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Shack UPS Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - entity: sensor.shack_ups_status
                name: Power Source
              - entity: sensor.shack_ups_battery_health
                name: Battery Status
              - entity: sensor.shack_ups_battery_capacity
                name: Charge Level
              - entity: sensor.shack_ups_remaining_runtime
                name: Runtime
              - entity: sensor.shack_ups_output_load
                name: Load
              - entity: sensor.shack_ups_output_voltage
                name: Output Voltage
              - entity: sensor.shack_ups_output_frequency
                name: Output Frequency
              - entity: sensor.shack_ups_output_current
                name: Output Current
              - entity: sensor.shack_ups_input_voltage
                name: Input Voltage
              - entity: sensor.shack_ups_input_frequency
                name: Input Frequency
              - entity: sensor.shack_ups_battery_temperature
                name: Battery Temperature                

popup_office_ups:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Office UPS Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
              - entity: sensor.office_ups_status
                name: Power Source
              - entity: sensor.office_ups_battery_health
                name: Battery Status
              - entity: sensor.office_ups_battery_capacity
                name: Charge Level
              - entity: sensor.office_ups_remaining_runtime
                name: Runtime
              - entity: sensor.office_ups_output_load
                name: Load
              - entity: sensor.office_ups_output_voltage
                name: Output Voltage
              - entity: sensor.office_ups_output_frequency
                name: Output Frequency
              - entity: sensor.office_ups_output_current
                name: Output Current
              - entity: sensor.office_ups_input_voltage
                name: Input Voltage
              - entity: sensor.office_ups_input_frequency
                name: Input Frequency
              - entity: sensor.office_ups_battery_temperature
                name: Battery Temperature

popup_work_alarm:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Work Alarm
        card:
          type: vertical-stack
          cards:
            - type: entities
              show_header_toggle: false
              entities:
                - entity: input_boolean.work_alarm_enabled
                  name: Enabled
                - entity: input_datetime.master_work_alarm
                  name: "Alarm Time"      
            - type: 'custom:time-picker-card'
              entity: input_datetime.master_work_alarm
              name: Wake Time
              hour_mode: 12
              layout:
                name: inside
                align_controls: right
                hour_mode: single   

popup_kitchen_leak:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Kitchen Leak Detectors
        card:
          type: entities
          show_header_toggle: false
          entities:
              - entity: binary_sensor.kitchen_sink_leak_dry
                name: "Kitchen Sink"
              - entity: binary_sensor.refrigerator_leak_dry
                name: "Refrigerator"                   
              - entity: binary_sensor.dishwasher_leak_dry
                name: "Dishwasher"       

popup_master_leak:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Master Bathroom Leak Detectors
        card:
          type: entities
          show_header_toggle: false
          entities:
              - entity: binary_sensor.left_master_sink_leak_dry
                name: "Left Sink"
              - entity: binary_sensor.right_master_sink_leak_dry
                name: "Right Sink"                   
              - entity: binary_sensor.master_toilet_leak_dry
                name: "Toilet"                  

popup_guest_leak:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Guest Bathroom Leak Detectors
        card:
          type: entities
          show_header_toggle: false
          entities:
              - entity: binary_sensor.guest_sink_leak_dry
                name: "Sink"                
              - entity: binary_sensor.guest_toilet_leak_dry
                name: "Toilet"                       

popup_addons:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]        
        title: Add-Ons
        card:
          type: "custom:list-card"
          entity: sensor.supervisor_updates         
          feed_attribute: addons
          columns:
            - {field: name, title: 'Name'}
            - {field: installed, title: 'Installed'}
            - {field: version, title: 'Latest'}                             

popup_supervisor:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Supervisor
        card:
          type: entities
          show_header_toggle: false
          entities:
              - entity:  sensor.supervisor_updates
                type: custom:multiple-entity-row
                name: Version
                show_state: false
                entities:
                  - attribute: current_version
                    name: Installed
                  - attribute: newest_version
                    name: Available              

popup_pooper:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                                    
        title: Litter Robot
        card:
          type: vertical-stack
          cards:
            
            - type: entities
              entities:
                - entity: sensor.litter_robot_status_short
                  name: Status
                  icon: mdi:cat
                - entity: counter.litter_robot_cycle_count
                  name: Cycle Count
                  icon: mdi:toilet
                - entity: sensor.litter_robot_average_cycle_capacity
                  name: Average Drawer Capacity
                  icon: mdi:trash-can-outline

            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  entity: switch.litter_robot_power
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                    - value: 'off'
                      color: rgb(255, 255, 255)
                  icon: mdi:power
                  name: Power
                
                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:trash-can
                  name: Empty
                  tap_action: 
                    action: call-service
                    service: script.litter_robot_empty

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:reload
                  name: Cycle
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: "pooper/command/clean"
                    
            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  entity: switch.litter_robot_lock
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                      icon: mdi:lock
                    - value: 'off'
                      color: rgb(255, 255, 255)
                      icon: mdi:lock-open
                  name: Lock
                
                - type: "custom:button-card"
                  entity: switch.litter_robot_light
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                      icon: mdi:lightbulb-on-outline
                    - value: 'off'
                      color: rgb(255, 255, 255)
                      icon: mdi:lightbulb-outline
                  name: Light

                - type: "custom:button-card"
                  entity: switch.litter_robot_sleep_mode
                  color_type: icon
                  state:
                    - value: 'on'
                      color: rgb(228, 94, 101)
                      icon: mdi:sleep
                    - value: 'off'
                      color: rgb(255, 255, 255)
                      icon: mdi:sleep-off
                  name: Sleep                   

            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  entity: sensor.litter_robot_cycle_wait_time
                  color_type: icon
                  icon: mdi:timer
                  state:
                    - value: '3'
                      color: rgb(228, 94, 101)
                    - operator: '!='
                      value: '3'
                      color: rgb(255, 255, 255)
                  name: 3 Min.
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: "pooper/command/wait"
                      payload: "3"

                - type: "custom:button-card"
                  entity: sensor.litter_robot_cycle_wait_time
                  color_type: icon
                  icon: mdi:timer
                  state:
                    - value: '7'
                      color: rgb(228, 94, 101)
                    - operator: '!='
                      value: '7'
                      color: rgb(255, 255, 255)
                  name: 7 Min.
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: "pooper/command/wait"
                      payload: "7"

                - type: "custom:button-card"
                  entity: sensor.litter_robot_cycle_wait_time
                  color_type: icon
                  icon: mdi:timer
                  state:
                    - value: '15'
                      color: rgb(228, 94, 101)
                    - operator: '!='
                      value: '15'
                      color: rgb(255, 255, 255)
                  name: 15 Min.
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: "pooper/command/wait"
                      payload: "15"

popup_generator_genset:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Generator Status
        card:
          type: vertical-stack
          cards:
            - type: conditional
              conditions:
                - entity: binary_sensor.generator_running
                  state: "off"
              card:
                type: entities
                entities:
                  - entity: sensor.generator_status
                    name: Generator Status
                    icon: mdi:engine
                  - entity: sensor.generator_firmware_status
                    name: Firmware
                    icon: mdi:micro-sd
                  - entity: sensor.generator_battery_voltage
                    name: Battery Voltage
                    icon: mdi:car-battery
                  - entity: sensor.generator_compartment_temperature
                    name: Enclosure Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_controller_temperature
                    name: Controller Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_total_engine_hours
                    name: Total
                    icon: mdi:timer
                  - entity: sensor.generator_loaded_engine_hours
                    name: Loaded
                    icon: mdi:timer
                  - entity: sensor.generator_time_since_service
                    name: Since Last Service
                    icon: mdi:timer
                  - entity: sensor.generator_engine_starts
                    name: Engine Starts
                    icon: mdi:engine
                  - entity: sensor.generator_clock
                    name: Controller Time
                    icon: mdi:timer

            - type: conditional
              conditions:
                - entity: binary_sensor.generator_running
                  state: "on"
              card:
                type: entities
                entities:
                  - entity: sensor.generator_status
                    name: Generator Status
                    icon: mdi:engine
                  - entity: sensor.generator_engine_speed
                    name: Engine Speed
                    icon: mdi:engine
                  - entity: sensor.generator_engine_speed_target
                    name: Engine Speed Target
                    icon: mdi:engine
                  - entity: sensor.generator_oil_pressure
                    name: Oil Pressure
                    icon: mdi:gauge
                  - entity: sensor.generator_oil_temperature
                    name: Oil Temperature
                    icon: mdi:thermometer
                  - entity: binary_sensor.generator_low_oil
                    name: Low Oil
                    icon: mdi:oil
                  - entity: sensor.generator_coolant_temperature
                    name: Coolant Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_intake_air_temperature
                    name: Intake Air Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_fuel_consumption_rate
                    name: Fuel Consumption
                    icon: mdi:fuel
                  - entity: sensor.generator_battery_voltage
                    name: Battery Voltage
                    icon: mdi:car-battery
                  - entity: sensor.generator_compartment_temperature
                    name: Enclosure Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_controller_temperature
                    name: Controller Temperature
                    icon: mdi:thermometer
                  - entity: sensor.generator_total_engine_hours
                    name: Total 
                    icon: mdi:timer
                  - entity: sensor.generator_time_since_service
                    name: Since Last Service
                    icon: mdi:timer
                  - entity: sensor.generator_clock
                    name: Controller Time
                    icon: mdi:timer

popup_generator_utility:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Utility Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
                - entity: sensor.generator_source_1_voltage
                  name: Utility Voltage   
                  icon: mdi:power-plug  
                - entity: sensor.generator_source_1_frequency
                  name: Utility Frequency       
                  icon: mdi:power-plug     

popup_generator_load:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Load Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
                - entity: sensor.generator_exercise_scheduled
                  name: Exercise Scheduled   
                  icon: mdi:calendar
                - entity: sensor.generator_exercise_active
                  name: Exercise Active
                  icon: mdi:engine
                - entity: sensor.generator_exercise_mode
                  name: Exercise Mode
                  icon: mdi:engine
                - entity: sensor.generator_exercise_interval
                  name: Exercise Interval
                  icon: mdi:timer
                - entity: sensor.generator_exercise_duration
                  name: Exercise Duration
                  icon: mdi:timer
                - entity: sensor.generator_next_exercise_start
                  name: Next Exercise
                  icon: mdi:calendar                

popup_generator_ats:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: ATS Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
                - entity: sensor.generator_network_connected
                  name: network Connected  
                  icon: mdi:ethernet
                - entity: sensor.generator_ats_connected
                  name: ATS Connected
                  icon: mdi:ethernet
                - entity: sensor.generator_ats_sources
                  name: Available Sources
                  icon: mdi:power-plug
                - entity: sensor.generator_ats_position
                  name: Contactor Position
                  icon: mdi:electric-switch
                - entity: sensor.generator_source_1_voltage
                  name: Utility Voltage
                  icon: mdi:power-plug   
                - entity: sensor.generator_source_1_frequency
                  name: Utility Frequency
                  icon: mdi:power-plug                   
                - entity: sensor.generator_source_2_voltage
                  name: Generator Voltage
                  icon: mdi:power-plug   
                - entity: sensor.generator_source_2_frequency
                  name: Generator Frequency
                  icon: mdi:power-plug 

popup_generator_control:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]                                    
        title: Generator Control
        card:
          type: vertical-stack
          cards:
            
            - type: horizontal-stack
              cards:

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:power-plug-off
                  name: Unloaded
                  lock:
                    enabled: true
                    unlock: hold
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: genset/command/run
                      payload: "unloaded"
                
                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:power-plug
                  name: Loaded
                  lock:
                    enabled: true
                    unlock: hold
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: genset/command/run
                      payload: "loaded"

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:wave
                  name: Cycle
                  lock:
                    enabled: true
                    unlock: hold
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: genset/command/run
                      payload: "cycle"

                - type: "custom:button-card"
                  color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:stop-circle
                  name: Stop
                  lock:
                    enabled: true
                    unlock: hold
                  tap_action: 
                    action: call-service
                    service: mqtt.publish
                    service_data:
                      topic: genset/command/run
                      payload: "stop"

popup_adguard:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: AdGuard Status
        card:
          type: vertical-stack
          cards:
            - type: entities
              entities:
                - entity: sensor.adguard_dns_queries
                  name: Total DNS Queries
                - entity: sensor.adguard_dns_queries_blocked
                  name: DNS Queries Blocked
                - entity: sensor.adguard_dns_queries_blocked_ratio
                  name: Blocked Query Ratio
                - entity: sensor.adguard_average_processing_speed
                  name: Average Processing Speed

popup_truck:
  sequence:
    - service: browser_mod.popup
      data_template:
        deviceID: ["{{ ','.join(deviceID) }}"]
        title: Truck Control
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                
                - type: "custom:button-card"
                  color: rgb(255, 255, 255)
                  icon: mdi:lock-open
                  name: Unlock
                  tap_action: 
                    action: call-service
                    service: rest_command.unlock_truck
                
                - type: "custom:button-card"
                  color: rgb(255, 255, 255)
                  icon: mdi:lock
                  name: Lock
                  tap_action: 
                    action: call-service
                    service: rest_command.lock_truck
                


            - type: horizontal-stack
              cards:               
                
                - type: "custom:button-card"
                  lock:
                    enabled: true
                    unlock: hold
                    color_type: icon
                  color: rgb(255, 255, 255)
                  icon: mdi:engine
                  name: Start
                  tap_action: 
                    action: call-service
                    service: rest_command.start_truck
                
                - type: "custom:button-card"
                  color: rgb(255, 255, 255)
                  icon: mdi:engine-off
                  name: Stop
                  tap_action: 
                    action: call-service
                    service: rest_command.stop_truck

